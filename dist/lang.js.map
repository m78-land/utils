{"version":3,"sources":["/Users/lixianjie/project/openSource/utils/src/lang.ts"],"sourcesContent":["import { AnyFunction } from \"./common-type.js\";\n\n/**\n * return the 'global' object according to different JS running environments\n * */\nexport function getGlobal(): any {\n  // eslint-disable-next-line no-restricted-globals\n  if (typeof self !== \"undefined\") {\n    // eslint-disable-next-line no-restricted-globals\n    return self;\n  }\n  if (typeof window !== \"undefined\") {\n    return window;\n  }\n  // @ts-ignore\n  if (typeof global !== \"undefined\") {\n    // @ts-ignore\n    return global;\n  }\n\n  throw new Error(\"unable to locate global object\");\n}\n\nexport const __GLOBAL__ = getGlobal();\n\n/**\n * custom event\n * */\nexport interface CustomEvent<Listener extends AnyFunction> {\n  /** register a listener */\n  on: (listener: Listener) => void;\n  /** destroy a listener */\n  off: (listener: Listener) => void;\n  /** trigger listeners */\n  emit: (...args: Parameters<Listener>) => void;\n}\n\n/**\n * create a CustomEvent\n * */\nexport function createEvent<\n  Listener extends AnyFunction = AnyFunction\n>(): CustomEvent<Listener> {\n  const listeners: Listener[] = [];\n\n  function on(listener) {\n    listeners.push(listener);\n  }\n\n  function off(listener) {\n    const ind = listeners.indexOf(listener);\n    if (ind !== -1) listeners.splice(ind, 1);\n  }\n\n  function emit(...args) {\n    listeners.forEach(listener => listener(...args));\n  }\n\n  return {\n    on,\n    off,\n    emit,\n  };\n}\n"],"names":["getGlobal","self","window","global","Error","__GLOBAL__","createEvent","on","listener","listeners","push","off","ind","indexOf","splice","emit","args","forEach"],"mappings":"AAAA;AAEA;;GAEG,GACH,OAAO,SAASA,SAAS,GAAQ;IAC/B,iDAAiD;IACjD,IAAI,OAAOC,IAAI,KAAK,WAAW,EAAE;QAC/B,iDAAiD;QACjD,OAAOA,IAAI,CAAC;KACb;IACD,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;QACjC,OAAOA,MAAM,CAAC;KACf;IACD,aAAa;IACb,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;QACjC,aAAa;QACb,OAAOA,MAAM,CAAC;KACf;IAED,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC,CAAC;CACnD;AAED,OAAO,IAAMC,UAAU,GAAGL,SAAS,EAAE,CAAC;AActC;;GAEG,GACH,OAAO,SAASM,WAAW,GAEA;QAGhBC,EAAE,GAAX,SAASA,EAAE,CAACC,QAAQ,EAAE;QACpBC,SAAS,CAACC,IAAI,CAACF,QAAQ,CAAC,CAAC;KAC1B;QAEQG,GAAG,GAAZ,SAASA,GAAG,CAACH,QAAQ,EAAE;QACrB,IAAMI,GAAG,GAAGH,SAAS,CAACI,OAAO,CAACL,QAAQ,CAAC,AAAC;QACxC,IAAII,GAAG,KAAK,CAAC,CAAC,EAAEH,SAAS,CAACK,MAAM,CAACF,GAAG,EAAE,CAAC,CAAC,CAAC;KAC1C;QAEQG,IAAI,GAAb,SAASA,IAAI,GAAU;QAAT,IAAA,IAAA,IAAO,GAAP,SAAO,CAAP,MAAO,EAAP,AAAGC,IAAI,GAAP,UAAA,IAAO,CAAA,EAAP,IAAO,GAAP,CAAO,EAAP,IAAO,GAAP,IAAO,EAAP,IAAO,EAAA,CAAP;YAAA,AAAGA,IAAI,CAAP,IAAO,IAAP,SAAO,AAAP,CAAA,IAAO,CAAA,CAAA;SAAA;QACnBP,SAAS,CAACQ,OAAO,CAACT,SAAAA,QAAQ;mBAAIA,QAAQ,CAARA,KAAiB,CAAjBA,KAAAA,CAAQ,EAAC,qBAAGQ,IAAI,CAAJA,CAAK;SAAA,CAAC,CAAC;KAClD;IAbD,IAAMP,SAAS,GAAe,EAAE,AAAC;IAejC,OAAO;QACLF,EAAE,EAAFA,EAAE;QACFI,GAAG,EAAHA,GAAG;QACHI,IAAI,EAAJA,IAAI;KACL,CAAC;CACH"}