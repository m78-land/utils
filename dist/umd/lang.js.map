{"version":3,"sources":["/Users/lixianjie/project/openSource/utils/src/lang.ts"],"sourcesContent":["import { AnyFunction } from \"./common-type.js\";\n\n/**\n * return the 'global' object according to different JS running environments\n * */\nexport function getGlobal(): any {\n  // eslint-disable-next-line no-restricted-globals\n  if (typeof self !== \"undefined\") {\n    // eslint-disable-next-line no-restricted-globals\n    return self;\n  }\n  if (typeof window !== \"undefined\") {\n    return window;\n  }\n  // @ts-ignore\n  if (typeof global !== \"undefined\") {\n    // @ts-ignore\n    return global;\n  }\n\n  throw new Error(\"unable to locate global object\");\n}\n\nexport const __GLOBAL__ = getGlobal();\n\n/**\n * custom event\n * */\nexport interface CustomEvent<Listener extends AnyFunction> {\n  /** register a listener */\n  on: (listener: Listener) => void;\n  /** destroy a listener */\n  off: (listener: Listener) => void;\n  /** trigger listeners */\n  emit: (...args: Parameters<Listener>) => void;\n}\n\n/**\n * create a CustomEvent\n * */\nexport function createEvent<\n  Listener extends AnyFunction = AnyFunction\n>(): CustomEvent<Listener> {\n  const listeners: Listener[] = [];\n\n  function on(listener) {\n    listeners.push(listener);\n  }\n\n  function off(listener) {\n    const ind = listeners.indexOf(listener);\n    if (ind !== -1) listeners.splice(ind, 1);\n  }\n\n  function emit(...args) {\n    listeners.forEach(listener => listener(...args));\n  }\n\n  return {\n    on,\n    off,\n    emit,\n  };\n}\n"],"names":["getGlobal","__GLOBAL__","createEvent","self","window","global","Error","on","listener","listeners","push","off","ind","indexOf","splice","emit","args","forEach"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;QAKgBA,SAAS;mBAATA,SAAS;;QAkBZC,YAAU;mBAAVA,UAAU;;QAiBPC,WAAW;mBAAXA,WAAW;;;;IAnCpB,SAASF,SAAS,GAAQ;QAC/B,iDAAiD;QACjD,IAAI,OAAOG,IAAI,KAAK,WAAW,EAAE;YAC/B,iDAAiD;YACjD,OAAOA,IAAI,CAAC;SACb;QACD,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;YACjC,OAAOA,MAAM,CAAC;SACf;QACD,aAAa;QACb,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;YACjC,aAAa;YACb,OAAOA,MAAM,CAAC;SACf;QAED,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC,CAAC;KACnD;IAEM,IAAML,UAAU,GAAGD,SAAS,EAAE,AAAC;IAiB/B,SAASE,WAAW,GAEA;YAGhBK,EAAE,GAAX,SAASA,EAAE,CAACC,QAAQ,EAAE;YACpBC,SAAS,CAACC,IAAI,CAACF,QAAQ,CAAC,CAAC;SAC1B;YAEQG,GAAG,GAAZ,SAASA,GAAG,CAACH,QAAQ,EAAE;YACrB,IAAMI,GAAG,GAAGH,SAAS,CAACI,OAAO,CAACL,QAAQ,CAAC,AAAC;YACxC,IAAII,GAAG,KAAK,CAAC,CAAC,EAAEH,SAAS,CAACK,MAAM,CAACF,GAAG,EAAE,CAAC,CAAC,CAAC;SAC1C;YAEQG,IAAI,GAAb,SAASA,IAAI,GAAU;YAAT,IAAA,IAAA,IAAO,GAAP,SAAO,CAAP,MAAO,EAAP,AAAGC,IAAI,GAAP,UAAA,IAAO,CAAA,EAAP,IAAO,GAAP,CAAO,EAAP,IAAO,GAAP,IAAO,EAAP,IAAO,EAAA,CAAP;gBAAA,AAAGA,IAAI,CAAP,IAAO,IAAP,SAAO,AAAP,CAAA,IAAO,CAAA,CAAA;aAAA;YACnBP,SAAS,CAACQ,OAAO,CAACT,SAAAA,QAAQ;uBAAIA,QAAQ,CAARA,KAAiB,CAAjBA,KAAAA,CAAQ,EAAC,mBAAGQ,IAAI,CAAJA,CAAK;aAAA,CAAC,CAAC;SAClD;QAbD,IAAMP,SAAS,GAAe,EAAE,AAAC;QAejC,OAAO;YACLF,EAAE,EAAFA,EAAE;YACFI,GAAG,EAAHA,GAAG;YACHI,IAAI,EAAJA,IAAI;SACL,CAAC;KACH"}