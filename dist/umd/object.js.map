{"version":3,"sources":["/Users/lixianjie/project/openSource/utils/src/object.ts"],"sourcesContent":["import { isString, isArray, isNumber, isWeakNumber, isObject } from \"./is.js\";\n\n/**\n * Delete all falsy values of the object (except 0)\n * @param source - Target object\n * @return - Processed original object\n */\nexport const shakeFalsy = (source: object): object => {\n  Object.keys(source).forEach((key) => {\n    const val = source[key];\n    if (!val && val !== 0) {\n      delete source[key];\n    }\n  });\n  return source;\n};\n\nfunction pickOrOmit(obj: any, props: string | string[], isPick = false) {\n  if (isString(props)) {\n    props = props.split(\",\").map((key) => key.trim());\n  }\n  const keys = Object.keys(obj);\n  const result = {};\n  keys.forEach((item) => {\n    const cond = isPick\n      ? props.indexOf(item) !== -1\n      : props.indexOf(item) === -1;\n    if (cond) {\n      result[item] = obj[item];\n    }\n  });\n  return result;\n}\n\n/**\n * Deletes the specified key value from the target object\n * @param obj - Target object\n * @param props - Key to be removed, comma separated string or string array\n * @return - New object after removal\n * */\nexport function omit<R>(obj: any, props: string | string[]): R {\n  return pickOrOmit(obj, props) as R;\n}\n\n/**\n * Pick the specified key value from the target object\n * @param obj - Target object\n * @param props - Key to be selected, comma separated string or string array\n * @return - A new object containing the selection key value\n * */\nexport function pick<R>(obj: any, props: string | string[]): R {\n  return pickOrOmit(obj, props, true) as R;\n}\n\n/**\n * Represents the character or character array of name. The array usage is used for chain value, such as: ['user', 'address']、['1', 'name']、['list', '4', 'name']\n *\n * 表示name的字符或字符数组，数组用法用于链式取值，如: ['user', 'address']、['1', 'name']、['list', '4', 'name']\n * */\nexport type NamePath = string | number | (string | number)[];\n\n/**\n * Get value on obj through NamePath\n *\n * 通过NamePath在obj上获取值\n * */\nexport function getNamePathValue(obj, name) {\n  if (isString(name)) {\n    return obj?.[name];\n  }\n\n  if (isArray(name) && name.length) {\n    return name.reduce((p, i) => {\n      return p?.[i];\n    }, obj);\n  }\n}\n\n/**\n * Convert NamePath to character form\n *\n * 将NamePath转换为字符形式\n * */\nexport function stringifyNamePath(name) {\n  if (isString(name)) return name;\n\n  return name.reduce((p, i) => {\n    if (isNumber(Number(i))) {\n      return `${p}[${i}]`;\n    }\n\n    if (isString(i)) {\n      return p.length ? `${p}.${i}` : i;\n    }\n\n    return p;\n  }, \"\");\n}\n\n/**\n * Set value on obj through NamePath\n *\n * 通过NamePath在obj上设置值\n * */\nexport function setNamePathValue(obj, name, val) {\n  if (isString(name)) {\n    obj[name] = val;\n  }\n\n  if (isArray(name) && name.length) {\n    let lastObj = obj;\n\n    for (let i = 0; i < name.length; i++) {\n      const n = name[i]; // 当前name\n      const nextN = name[i + 1]; // 下一个name\n      const hasNextN = nextN !== undefined; // 是否有下个\n\n      if (!hasNextN) {\n        lastObj[n] = val;\n        return;\n      }\n\n      // 确保要操作的对象存在\n      if (isWeakNumber(nextN)) {\n        if (!isArray(lastObj[n])) {\n          lastObj[n] = [];\n        }\n        // 不是数字的话则为对象\n      } else if (!isObject(lastObj[n])) {\n        lastObj[n] = {};\n      }\n\n      lastObj = lastObj[n];\n    }\n  }\n}\n"],"names":["shakeFalsy","omit","pick","getNamePathValue","stringifyNamePath","setNamePathValue","source","Object","keys","forEach","key","val","pickOrOmit","obj","props","isPick","isString","split","map","trim","result","item","cond","indexOf","name","isArray","length","reduce","p","i","isNumber","Number","lastObj","n","nextN","hasNextN","undefined","isWeakNumber","isObject"],"mappings":"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"}