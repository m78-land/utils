{"version":3,"sources":["/Users/lixianjie/project/openSource/utils/src/array.ts"],"sourcesContent":["import { isArray } from \"./is.js\";\n\n/**\n * swap index of two items in array.\n * if the index is exceeded, no action is performed.\n * return the original array after operation.\n * */\nexport function swap<T extends Array<any>>(\n  arr: T,\n  sourceInd: number,\n  targetInd: number\n): T {\n  if (sourceInd < 0 || targetInd < 0) return arr;\n  if (sourceInd > arr.length - 1 || targetInd > arr.length - 1) return arr;\n  arr.splice(targetInd, 1, arr.splice(sourceInd, 1, arr[targetInd])[0]);\n  return arr;\n}\n\n/**\n * move array item location `form -> to`, return the original array after operation.\n * */\nexport function move<T extends Array<any>>(\n  array: T,\n  form: number,\n  to: number\n): T | undefined {\n  if (form < 0 || to < 0) return array;\n  if (form > array.length - 1 || to > array.length - 1) return array;\n  array.splice(to, 0, ...array.splice(form, 1));\n  return array;\n}\n\n/**\n * receive T or T[], return T[]\n * */\nexport function ensureArray<T>(val: T[] | T): T[] {\n  return (isArray(val) ? val : [val]) as T[];\n}\n\n/**\n * array deduplication, use shallow compare\n * */\nexport function uniq<T extends Array<any>>(array: T): T {\n  const arr: any[] = [];\n\n  array.forEach(it => {\n    if (arr.indexOf(it) === -1) {\n      arr.push(it);\n    }\n  });\n\n  return arr as T;\n}\n\n/**\n * array deduplication, use comparator\n * */\nexport function uniqWith<T>(\n  array: T[],\n  comparator: (a: T, b: T) => boolean\n): T[] {\n  const arr: T[] = [];\n\n  array.forEach(it => {\n    let flag = false;\n    for (const item of arr) {\n      if (comparator(item, it)) {\n        flag = true;\n        break;\n      }\n    }\n\n    if (!flag) {\n      arr.push(it);\n    }\n  });\n\n  return arr;\n}\n"],"names":["swap","move","ensureArray","uniq","uniqWith","arr","sourceInd","targetInd","length","splice","array","form","to","val","isArray","forEach","it","indexOf","push","comparator","flag","item"],"mappings":"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"}